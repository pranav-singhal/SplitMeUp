<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script type="text/javascript" src="js/web3Functions.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.1/css/bulma.css" />
    <script defer src="https://use.fontawesome.com/releases/v5.1.0/js/all.js"></script>
    <script
            src="https://code.jquery.com/jquery-2.2.4.min.js"
            integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
            crossorigin="anonymous"></script>
    <link rel="stylesheet" href="css/preloader.css">
    <script type="text/javascript" src="js/telegramSend.js"></script>
    <script type="text/javascript" src="js/main.js">
    </script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="js/socket.js"></script>
    <title>SplitMeUp!</title>
</head>
<body>
<section class="hero is-primary">
    <div class="hero-body">
        <div class="container">
            <div class="level">
                <h1 class="title level-item">Split Me Up!</h1>
            </div>
            <div class="level">
                <h2 class="subtitle level-item">The paperless way to secure your private keys!!!</h2>
            </div>

        </div>
    </div>
</section>
<div class="column card-container-column">

    <div class="level">
      <div class = "description-level-item">
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse at ullamcorper neque. Aliquam lacinia sit amet mauris ac commodo. Sed in odio vel arcu pharetra suscipit. Etiam vitae ornare tellus. Maecenas nulla ipsum, aliquam in nisl id, tristique auctor nibh. Integer augue purus, egestas a fringilla ac, lacinia nec ligula. Duis vitae lacinia dolor. In hac habitasse platea dictumst. Maecenas consequat congue commodo. Pellentesque vitae vehicula diam. Morbi arcu lorem, faucibus id faucibus ut, aliquam eget enim.
      </div>
        <div class="level-item">
            <a class="button is-primary main-working-button" id="recover-your-key-idd">Recover Your Key!</a>
        </div>

    </div>

    <div class="level main-paperless-level">
        <div class = "description-level-item">
          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse at ullamcorper neque. Aliquam lacinia sit amet mauris ac commodo. Sed in odio vel arcu pharetra suscipit. Etiam vitae ornare tellus. Maecenas nulla ipsum, aliquam in nisl id, tristique auctor nibh. Integer augue purus, egestas a fringilla ac, lacinia nec ligula. Duis vitae lacinia dolor. In hac habitasse platea dictumst. Maecenas consequat congue commodo. Pellentesque vitae vehicula diam. Morbi arcu lorem, faucibus id faucibus ut, aliquam eget enim.
        </div>
        <div class="level-item">
            <a class="button is-primary main-working-button" id="login-new-user-button">Go paperless!</a>
        </div>
    </div>

    <div class="level">
      <div class = "description-level-item">
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse at ullamcorper neque. Aliquam lacinia sit amet mauris ac commodo. Sed in odio vel arcu pharetra suscipit. Etiam vitae ornare tellus. Maecenas nulla ipsum, aliquam in nisl id, tristique auctor nibh. Integer augue purus, egestas a fringilla ac, lacinia nec ligula. Duis vitae lacinia dolor. In hac habitasse platea dictumst. Maecenas consequat congue commodo. Pellentesque vitae vehicula diam. Morbi arcu lorem, faucibus id faucibus ut, aliquam eget enim.
      </div>
        <div class="level-item">
            <a class="button is-primary main-working-button" id="register-tgram-user-button">Register as a Telegram User</a>
        </div>

    </div>
</div>

<div class="custom-account" id="login-new-user-modal">
    <div class="modal-card" id="login-new-user-modal-card">
        <!-- <header class="modal-card-head"> -->
            <p class="modal-card-title"><b>Create an Account</b></p>
            <hr><hr><hr>
            <!-- <button class="delete" aria-label="close"></button> -->
        <!-- </header> -->
        <!-- <section class="modal-card-body"> -->
            <div class="column">
                <div class="field">
                    <label class="label">Username</label>
                    <div class="control">
                        <input class="input" type="text" id="username" placeholder="Text input">
                        <span class="help is-warning">Remember this username</span>
                    </div>

                </div>
                <div class="field">
                    <label class='label'>Password</label>
                    <div class="control">
                        <input class='input' id="password" type="password" placeholder="Create new password">
                        <span class="help is-warning">We will use this password to encrypt your seed phrase, so choose it wisely!</span>
                        <span class="help is-warning">Relax we at split me up dont save this password anywhere</span>
                    </div>
                </div>
                <div class="field">
                    <label class='label'>Confirm Password</label>
                    <div class="control">
                        <input class='input' type="password" placeholder="Confirm password">
                    </div>
                </div>
            </div>
        <!-- </section> -->
        <!-- <footer class="modal-card-foot"> -->
        <br>
        <footer class="footer-button">
            <button class="button is-success" id="create-account">Create Account</button>
            <button class="button close-modal" >Cancel</button>
        </footer>
    </div>
    <div class="modal-card hide" id="enter-seed-phrase">
        <!-- <header class="modal-card-head"> -->
            <p class="modal-card-title"><b>Let the Splitting Begin</b></p>
            <hr><hr><hr>
            <!-- <button class="delete" aria-label="close"></button> -->
        <!-- </header> -->
        <!-- <section class="modal-card-body"> -->
            <div class="column">
                <h3 class="subtitle"><b>Enter Your seed Phrase</b></h3>
                <p class="is-size-6	"> Enter the seed phrase that you use to generate your private key...
                    Don't worry, we at 'Split me Up' promise not to see or store your key or the password
                    you just entered anywhere with us.(You can check you terms and agreement and the code on
                    our app.)
                </p>
                <br>


                <textarea class="textarea" name="name" id="seed-phrase" placeholder="Enter Seed Phrase" value=" "></textarea>
                <br>
                <button class="button is-success" id="create-piece-button">Create Pieces!</button>






            </div>
        <!-- </section> -->
    </div>

    <div class="preloader loading hide">
        <span class="slice"></span>
        <span class="slice"></span>
        <span class="slice"></span>
        <span class="slice"></span>
        <span class="slice"></span>
        <span class="slice"></span>
    </div>
</div>
<div class="custom-account-become-a-part" id="tgram-register-modal">
    <div class="modal-card" id="tgram-register-modal-card">
        <!-- <header class="modal-card-head"> -->
            <p class="modal-card-title"><b>Connect To Our Tgram Network</b></p>
            <hr><hr><hr>
            <br>
        <!-- </header> -->
        <!-- <section class="modal-card-body"> -->
            <a href="http://telegram.me/BabyGotHack_Bot" target="_blank" id="tgram-link"> @SplitMeUp </a>

            <div class="field hide" id="tgram-otp-field">
              <br>
                <label class="label">Otp</label>
                <div class="control">
                    <input class="input" type="number" id="otp" placeholder="Enter OTP"><br>
                    <br>
                    <button class="button is-success" id="verify-otp-button">Verify OTP</button>
                    <br>

                </div>

            </div>

        <!-- </section> -->
    </div>
</div>


<div class="recover-card">

<div class="recover-your-key modal-card">
  <h1><b>Recover Your Key</b></h1><hr><hr><hr>
  <br>
  <label class="label">Username</label>
  <input class="input" id="account_recover_name" placeholder="Enter Username">
  <label class="label">Password</label>
  <input class="input" id="account_recover_password" placeholder="Enter Password">
  <br>
  <br>
  <button id="recover-button">Recover Key</button>


</div>

<div class="model-for-result">
    <div class="wait-request">
      Your request is under Process . Please wait until we recieve all the pieces from the user. <br> This process might take some time.
    </div>

        <div class="preloader loading hide">
            <span class="slice"></span>
            <span class="slice"></span>
            <span class="slice"></span>
            <span class="slice"></span>
            <span class="slice"></span>
            <span class="slice"></span>
        </div>
</div>

</div>

</body>
<script type="text/javascript" src="js/playWithShares.js"></script>
<script type="text/javascript">
    password ='';
    username - '';

    $(function(){
        console.log("document ready");

        $('#recover-your-key-idd').click(function(){
          $('.recover-your-key')[0].style.display = "block" ;
        });

        $('#login-new-user-button').click(function(){
            $('#login-new-user-modal').addClass('is-active');
            $('.custom-account')[0].style.display = "block";

        });
        $('.main-working-button').click(function(){
            $('.card-container-column')[0].style.display = "none";
        });


        $('.delete').click(function(){

            $('#login-new-user-modal').removeClass('is-active');
            $('.card-container-column')[0].style.display = "";

        })
        $('.close-modal').click(function(){
            $('#login-new-user-modal').removeClass('is-active');
            $('.card-container-column')[0].style.display = "";

        })
        $('#register-tgram-user-button').click(function(){
            $('#tgram-register-modal').addClass('is-active');
            $('.custom-account-become-a-part')[0].style.display = "block" ;
        });
    })
    $('#tgram-link').click(function(){
        $('#tgram-otp-field').removeClass('hide');


    });
    $('#verify-otp-button').click(function(){
        let otp = $('#otp').val();
        sendOTP(otp,function(chatID){

            addTelegramUserToContract(chatID,function(bool){
                if(bool){
                    sendWelcomeMessage(chatID, function () {
                        console.log("chatid saved to contract");
                    });
                }
            });
        });

    })
    $('#create-account').click(function(){
        username = $('#username').val();
        data ={
            username: username
        }
        // send username to backend code goes here
        password = $('#password').val();
        $('#login-new-user-modal-card').addClass('hide');
        $('#enter-seed-phrase').removeClass('hide');
    })
    $('#create-piece-button').click(function(){
        $('.preloader')[0].removeClass('hide');
        $(this).attr('disabled','disabled');
        $('#seed-phrase').attr('disabled','disabled');
        $(this).html('Encrypting your key...');
        var seed_phrase = $('#seed-phrase').val();
        makeShares(seed_phrase,password, username);
        // $(this).html('Sending your Key to Users...');
        // telegram code goes here



    });

    $('#recover-button').click(function () {
        let pass = $('#account_recover_password').val();
        let user = $('#account_recover_name').val();
        console.log(user, pass);
        retreiveShares(user, pass);

        $(".model-for-result")[0].style.display = "flex";
        $('.preloader').removeClass('hide');




    });


    window.remove_modal = function(seed_phrase)
    {
          $(".wait-request").html("Your Seed Phrase <br>" + seed_phrase);
          $('.preloader').addClass('hide');

    }



</script>

<style media="screen">

    html , body {
      height: 100vh;
    }


    .hide{
        display: none !important;
    }

    .card-container-column
    {
      padding-top: 30px ;
      padding-bottom: 30px;
      display: flex;
      justify-content: space-around;
      align-items: center;
    }
    .card-container-column .level
    {
      width: 25vw;
      height: 30vw;
      border-radius: 4px;
      background: #bde2d9;
      box-sizing: border-box;
      padding: 1em;
      display: flex;
      flex-direction: column;
      justify-content: space-around;
      margin: 0px;

    }

    .is-warning{
      color: red !important;
    }
    .card-container-column .level .description-level-item
    {
      font-size: 0.9em;
      color: white;
      text-align: justify;
      margin-bottom: 20px;
    }

    .card-container-column .level .level-item
    {
      flex-grow: 0 ;
    }


    .recover-card
    {
      display: flex;
      justify-content: space-around;
      align-items: center;
    }

   .card-container-column .main-paperless-level
    {
        width: 30vw ;
        height: 40vw;
        background-color: #8de6d1 ;
        font-size: 1em;

    }



    .recover-your-key , .custom-account , .custom-account-become-a-part
    {
      display: none ;
      padding: 20px;
      margin: 10px;



    }

    .recover-your-key h1{
      font-size: 1.5em;
    }

    .custom-account-become-a-part hr
    {
      margin-top: 2px;
      margin-bottom: 2px;

    }

    .recover-your-key hr{

        margin-top: 2px;
        margin-bottom: 2px;
      }

      .recover-your-key label
      {
        margin-top: 5px;
      }

      #recover-button
      {
        padding: 10px;
        border-radius: 4px;
        background-color: #00d1b2;
        border: 1px solid #00d1b2 ;
        color: white;
        font-size: 1.0em;
      }


      .modal-card hr
      {
        margin-top: 2px;
        margin-bottom: 2px;
       }



    @media only screen and (max-width: 800px)
    {
      body
      {
        height: auto;
      }
      .card-container-column
      {
        flex-direction: column;
        align-items: center;
      }

      .card-container-column .level
      {
        margin-top: 20px;
        width: 75vw;
        height: auto;
      }



      .card-container-column
      {
        align-items: center;
      }

    }




    .model-for-result
    {
      display: none;
      position: absolute;
      z-index: 1;
      top: 0;
      bottom: 0;
      left: 0;
      right: 0;
      text-align: center;
      font-size: 2em;

      justify-content: space-around;
      align-items: center;

      color: white;
      background-color: rgba(0,0,0,0.70);
      padding: 20px;
    }

  .model-for-result .preloader
  {
    top: 65%;
  }



</style>
</html>
